<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Radish'blog" href="http://rainyblue.cn/rss.xml"><link rel="alternate" type="application/atom+xml" title="Radish'blog" href="http://rainyblue.cn/atom.xml"><link rel="alternate" type="application/json" title="Radish'blog" href="http://rainyblue.cn/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="微信小程序"><link rel="canonical" href="http://rainyblue.cn/2024/06/04/Educational/WeChat/WeChat_Program3/"><title>第三章：微信小程序页面交互 - 微信小程序开发 - 学习类 | ShokaBlog = Radish'blog</title><meta name="generator" content="Hexo 7.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="container"><div class="loader"><div class="loader--dot"></div><div class="loader--dot"></div><div class="loader--dot"></div><div class="loader--dot"></div><div class="loader--dot"></div><div class="loader--dot"></div><div class="loader--text"></div></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">第三章：微信小程序页面交互</h1><div class="meta"><span class="item" title="创建时间：2024-06-04 10:50:24"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2024-06-04T10:50:24+08:00">2024-06-04</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>12k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>30 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">ShokaBlog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://images.weserv.nl/?url=https://raw.githubusercontent.com/rainyblue1001/image/main/img/img2024124.jpg"></li><li class="item" data-background-image="https://images.weserv.nl/?url=https://raw.githubusercontent.com/rainyblue1001/image/main/img/img2024183.jpg"></li><li class="item" data-background-image="https://images.weserv.nl/?url=https://raw.githubusercontent.com/rainyblue1001/image/main/img/img2024040.jpg"></li><li class="item" data-background-image="https://images.weserv.nl/?url=https://raw.githubusercontent.com/rainyblue1001/image/main/img/img2024257.jpg"></li><li class="item" data-background-image="https://images.weserv.nl/?url=https://raw.githubusercontent.com/rainyblue1001/image/main/img/img2024029.jpg"></li><li class="item" data-background-image="https://images.weserv.nl/?url=https://raw.githubusercontent.com/rainyblue1001/image/main/img/img2024271.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><div id="bgpic"><div id="mask"></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Educational/" itemprop="item" rel="index" title="分类于 学习类"><span itemprop="name">学习类</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Educational/WeChat/" itemprop="item" rel="index" title="分类于 微信小程序开发"><span itemprop="name">微信小程序开发</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://rainyblue.cn/2024/06/04/Educational/WeChat/WeChat_Program3/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="萝卜仔"><meta itemprop="description" content=", Only studying is exalted."></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Radish'blog"></span><div class="body md" itemprop="articleBody"><p>通过第 2 章的学习，读者已可以在微信小程序项目中实现页面结构和样式效果，但是这些页面并不能进行交互。在实际的微信小程序项目中，用户是可以与微信小程序页面发生交互的，即可以通过触摸、长按等操作实现各种各样的功能。本章将对微信小程序页面交互的相关知识进行详细讲解。</p><span id="more"></span><hr><p>学习目标：</p><ul><li>熟悉 Page () 函数，能够归纳 Page () 函数及其各个参数的作用<br>掌握数据绑定能够运用数据绑定实现页面中数据的显示与修改</li><li>掌握事件绑定，能够在组件触发时执行对应的事件处理函数</li><li>熟悉事件对象，能够总结事件对象的属性及其作用</li><li>掌握 this 关键字的使用，能够运用 this 关键字访问当前页面中的数据或者函数</li><li>掌握 setData () 方法的使用，能够完成数据的设置与更改<br>掌握条件渲染，能够运用条件渲染根据不同的判断结果显示不同的组件</li><li>掌握 &lt;block&gt; 标签，能够运用 &lt; block &gt; 标签同时显示或隐藏多个组件</li><li>熟悉 hidden 属性，能够区分其与 wx:if 控制属性的区别</li><li>掌握 data-* 自定义属性，能够完成 data-* 自定义数据的设置与获取</li><li>掌握模块的使用能够完成模块的创建和引入</li><li>掌握列表渲染，能够运用列表渲染将数组中的数据渲染到页面中</li><li>掌握网络请求的实现，能够通过网络请求与服务器进行交互</li><li>掌握提示框的实现，能能够在页面中显示消息提示框</li><li>掌握 WXS 的使用，能够运用 WXS 处理页面中的数据</li><li>掌握上拉触底的实现，能够运用上拉触底实现数据的动态加载</li><li>掌握下拉刷新的实现，能够运用下拉刷新实现数据的重新加载</li><li>掌握双向数据绑定，，能够运用双向绑定实现数据的动态更改、</li></ul><h1 id="1page函数"><a class="anchor" href="#1page函数">#</a> 1.Page () 函数</h1><p>在微信小程序中，页面交互的代码写在页面的 JS 文件中，每个页面都需要通过 Page () 函数进行注册。需要注意的是，Page () 函数只能写在微信小程序每个页面对应的 JS 文件中，并且每个页面只能注册一个。</p><p>Page () 函数的参数是一个对象，通过该对象可以指定页面初始数据、页面生命周期回调函数和页面事件处理函数。调用 Page () 函数的示例代码如下</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 页面初始数据</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 页面生命周期回调函数，以 onLoad () 为例</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onLoad()函数执行了'</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 页面事件处理函数，以 onPullDownRefresh () 为例</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function-variable function">onPullDownRefresh</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onPullDownRefresh()函数执行了'</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="页面初始数据"><a class="anchor" href="#页面初始数据">#</a> 页面初始数据</h2><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">msg1</span><span class="token operator">:</span> <span class="token string">'Hello'</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">msg2</span><span class="token operator">:</span> <span class="token string">'World'</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><h2 id="页面生命周期回调函数"><a class="anchor" href="#页面生命周期回调函数">#</a> 页面生命周期回调函数</h2><p>在微信小程序中，页面的生命周期是指每个页面 “加载→渲染→销毁” 的过程，每个页面都有生命周期。</p><p><span class="red">如果想要在某个特定的时机进行特定的处理，则可以通过页面生命周期回调函数来完成。</span></p><p>页面生命周期回调函数用于实现在特定的时间点执行特定的操作，随着页面生命周期的变化，页面生命周期回调函数会自动执行。</p><p>页面生命周期回调函数如下表所示</p><table><thead><tr><th>函数名</th><th>说明</th></tr></thead><tbody><tr><td>onLoad()</td><td>监听页面加载，且一个页面只会在创建完成后触发一次</td></tr><tr><td>onShow()</td><td>监听页面显示，只要页面显示就会触发此函数</td></tr><tr><td>onReady()</td><td>监听页面初次渲染完成，一个页面只会调用一次</td></tr><tr><td>onHide()</td><td>监听页面隐藏，只要页面隐藏就会触发此函数</td></tr><tr><td>onUnload()</td><td>监听页面卸载，只要页面被释放就会触发此函数</td></tr></tbody></table><h2 id="页面事件处理函数"><a class="anchor" href="#页面事件处理函数">#</a> 页面事件处理函数</h2><p>在微信小程序中，用户可能会在页面上进行一些操作，例如上拉、下拉、滚动页面等，如何在发生这些操作的时候进行处理呢？可以通过页面事件处理函数来完成。</p><p><span class="red">页面事件处理函数用于监听用户的行为。</span></p><p>常见的页面事件处理函数如下表所示:</p><table><thead><tr><th>函数名</th><th>说明</th></tr></thead><tbody><tr><td>onPullDownRefresh()</td><td>监听用户下拉刷新事件</td></tr><tr><td>onReachBottom()</td><td>监听页面上拉触底事件</td></tr><tr><td>onPageScroll()</td><td>页面滚动会连续调用</td></tr><tr><td>onShareAppMessage()</td><td>用户点击页面右上角 “...” 按钮，选择 “转发给朋友” 时调用</td></tr></tbody></table><h1 id="2数据绑定"><a class="anchor" href="#2数据绑定">#</a> 2. 数据绑定</h1><p>微信小程序提供了 Mustache 语法（又称为双大括号语法）用于实现数据绑定 ， 可 将 data 中 的 数 据 通 过 Mustache 语法输出到页面上。</p><p>通过数据绑定将数据显示在页面中案例：</p><ol><li><p>打开 pages/index/index.js 文件，在 data 中定义一个 message 数据。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'Hello World'</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>在 pages/index/index.wxml 文件中编写页面结构。</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span><span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">&lt;!-- 通过 Mustache &#123;&#125; 语法将 data 中的数据显示在页面中 --></span></pre></td></tr></table></figure><p><img data-src="https://images.weserv.nl/?url=https://raw.githubusercontent.com/rainyblue1001/image/main/img/image-20240608181250880.png" alt="image-20240608181250880"></p></li></ol><p>页面上显示了 message 变量对应的值，也就是把 “Hello World” 渲染到页面代码中所在的位置，实现了从逻辑层到视图层的数据显示。</p><h1 id="3事件绑定"><a class="anchor" href="#3事件绑定">#</a> 3. 事件绑定</h1><p>在微信小程序中，事件是视图层到逻辑层的通信方式，通过给组件绑定事件，可以监听用户的操作行为，然后在对应的事件处理函数中进行相应的业务处理。例如，为页面中的按钮绑定事件，当用户点击按钮时，就产生了事件。</p><p>在微信小程序中，常见的事件如下表所示：</p><table><thead><tr><th style="text-align:center"><strong>类别</strong></th><th style="text-align:center"><strong>事件名称</strong></th><th style="text-align:left"><strong>触发条件</strong></th></tr></thead><tbody><tr><td style="text-align:center">点击事件</td><td style="text-align:center">tap</td><td style="text-align:left">手指触摸后马上离开</td></tr><tr><td style="text-align:center">长按事件</td><td style="text-align:center">longpress</td><td style="text-align:left">手指触摸后，超过 350ms 再离开，如果指定了事件回调函数并触发了这个事件，tap 事件将不被触发</td></tr><tr><td style="text-align:center">触摸事件</td><td style="text-align:center">touchstart</td><td style="text-align:left">手指触摸动作开始</td></tr><tr><td style="text-align:center">触摸事件</td><td style="text-align:center">touchmove</td><td style="text-align:left">手指触摸后移动</td></tr><tr><td style="text-align:center">触摸事件</td><td style="text-align:center">touchcancel</td><td style="text-align:left">手指触摸动作被打断，例如来电提醒、弹窗</td></tr><tr><td style="text-align:center">触摸事件</td><td style="text-align:center">touchend</td><td style="text-align:left">手指触摸动作结束</td></tr><tr><td style="text-align:center">其他事件</td><td style="text-align:center">input</td><td style="text-align:left">键盘输入时触发</td></tr><tr><td style="text-align:center">其他事件</td><td style="text-align:center">submit</td><td style="text-align:left">携带 form 中的数据触发 submit 事件</td></tr></tbody></table><p>事件分类：</p><ul><li>冒泡事件：指当一个组件上的事件被触发后，该事件会向父组件传递。</li><li>非冒泡事件：指当一个组件上的事件被触发后，该事件不会向父组件传递。</li></ul><blockquote><p>注意：点击事件、长按事件、触摸事件都属于冒泡事件，其他事件属于非冒泡事件。</p></blockquote><p>组件绑定事件</p><ul><li>若要为组件绑定事件，可以通过为组件添加<span class="red"> “bind + 事件名称” 属性或 “catch + 事件名称” 属性</span>来完成，属性的值为事件处理函数，当组件的事件被触发时，会主动执行事件处理函数。</li></ul><blockquote><p>bind 和 catch 的区别在于，bind 不会阻止冒泡事件向上冒泡，而 catch 可以阻止冒泡事件向上冒泡。</p></blockquote><p>为组件绑定事件案例：</p><ol><li><p>在 pages/index/index.wxml 文件中给 button 组件绑定 tap 事件，事件处理函数为 compare () 函数。</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>compare<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>比较<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>bindtap 表示绑定 tap 事件。<br>在触屏手机中，tap 事件在用户手指触摸 button 组件离开后触发，而在微信开发者工具中，tap 事件在鼠标单击 button 组件时触发。</p></li><li><p>在 pages/index/index.js 文件的 Page ({}) 中定义 compare () 函数。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function-variable function">compare</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'比较按钮被点击了'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure></li></ol><p>事件处理函数的简写形式</p><p>由于 compare () 函数是 {} 对象的方法，所以可以将 compare () 函数写成方法的简写形式，即省略 compare 后面的冒号和 function 关键字</p><p>示例代码如下</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">compare</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'比较按钮被点击了'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><h1 id="4事件对象"><a class="anchor" href="#4事件对象">#</a> 4. 事件对象</h1><p>概念：在开发微信小程序的过程中，有时需要获取事件发生时的一些信息，例如事件类型、事件发生的时间、触发事件的对象等，此时可以通过事件对象来获取。</p><p><span class="red">当事件处理函数被调用时，微信小程序会将事件对象以参数的形式传给事件处理函数。</span></p><p>事件对象的属性：</p><table><thead><tr><th><strong>属性</strong></th><th><strong>类型</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>type</td><td>string</td><td>事件类型</td></tr><tr><td>timeStamp</td><td>number</td><td>事件生成的时间戳</td></tr><tr><td>target</td><td>object</td><td>触发事件的组件的一些属性值集合</td></tr><tr><td>currentTarget</td><td>object</td><td>当前组件的一些属性值集合</td></tr><tr><td>mark</td><td>object</td><td>事件标记数据</td></tr></tbody></table><p><strong>事件对象的使用</strong></p><ol><li><p>修改 pages/index/index.js 文件中的 compare () 函数，通过参数接收事件对象，并将事件对象输出到控制台。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function-variable function">compare</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     </pre></td></tr><tr><td data-num="2"></td><td><pre>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>  </pre></td></tr><tr><td data-num="3"></td><td><pre>     <span class="token comment">// 函数参数 e 表示事件对象  </span></pre></td></tr><tr><td data-num="4"></td><td><pre> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure></li><li><p>单击 “比较” 按钮，控制台中输出的结果如下图所示。</p><p><img data-src="https://images.weserv.nl/?url=https://raw.githubusercontent.com/rainyblue1001/image/main/img/image-20240618234427693.png" alt="image-20240618234427693"></p><p>从上图中可以看出，控制台成功输出了事件对象的相关信息</p></li></ol><p>target 属性和 currentTarget 属性</p><p>事件对象属性中的 target 和 currentTarget 属性的对比。</p><ul><li>target 表示获取触发事件的组件的一些属性值集合</li><li>currentTarget 表示获取当前组件的一些的属性值集合</li></ul><p>事件对象属性中 target 和 currentTarget 的区别案例：</p><ol><li><p>在 pages/index/index.wxml 文件中编写页面结构。</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewtap<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    outer</pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>        inner</pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li><li><p>在 pages/index/index.js 文件中添加 viewtap () 事件处理函数。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function-variable function">viewtap</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>id<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><p>使用 e.target.id 或 e.currentTarget.id 都可以获取发生事件的组件的 id，由于 outer 和 inner 的 id 不同，因此可以区分这两个组件。</p><p>运行程序测试，当单击 outer 时，控制台中的输出结果为 outer-outer，而单击 inner 时，控制台中的输出结果为 inner-outer。</p><p>由此可见，e.target 获取的是子元素的属性值集合，而 e.currentTarget 获取到的是父元素的属性值集合。</p></li></ol><h1 id="5this关键字"><a class="anchor" href="#5this关键字">#</a> 5.this 关键字</h1><p>在微信小程序开发过程中，有时需要在函数中访问页面中定义的一些数据，或者调用页面中定义的一些函数，此时可以通过 this 关键字来实现。</p><p><span class="red">this 关键字代表当前页面对象。</span></p><p>this 关键字的使用</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>		<span class="token comment">// 定义 data 数据</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token function-variable function">test</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>		<span class="token comment">// 定义 test () 函数</span></pre></td></tr><tr><td data-num="4"></td><td><pre>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test()函数执行了'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>    </pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>num<span class="token punctuation">)</span>	</pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">// 通过 this 关键字访问 data 中的 num 数据</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>			</pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token comment">// 通过 this 关键字调用 test () 函数</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="6setdata方法"><a class="anchor" href="#6setdata方法">#</a> 6.setData () 方法</h1><p>在微信小程序开发过程中，虽然通过数据绑定可以将 data 中定义的数据渲染到页面，但是如果数据发生了变化，页面并不会同步更新数据。</p><p><span class="red">为了实现在数据变化时使页面同步更新，微信小程序提供了 setData () 方法</span>，该方法可以立即改变 data 中的数据，并通过异步的方式将数据渲染到页面上。</p><p>setData () 方法通过 this 关键字调用，该方法的基本语法格式如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token punctuation">,</span> callback<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>setData () 方法的参数</p><table><thead><tr><th><strong>参数</strong></th><th><strong>类型</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>data</td><td>object</td><td>当前要改变的数据</td></tr><tr><td>callback</td><td>function</td><td>setData () 方法引起的页面更新渲染完毕后的回调函数</td></tr></tbody></table><blockquote><p>注意：</p><ul><li>第 1 个参数 data 是 object 类型的数据，以 key: value 的形式将 data 中的 key 对应值设置成 value；</li><li>第 2 个参数 callback 是回调函数，可以省略。</li></ul></blockquote><p>setData () 方法的使用：</p><ol><li><p>在 pages/index/index.js 文件中编写页面中所需的数据 message 和事件处理函数 changeText ()。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'Hello World'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function-variable function">changeText</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello 微信小程序'</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>在 pages/index/index.wxml 文件中编写页面结构。</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>changeText<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>给 view 组件绑定了 tap 事件，事件处理函数为 changeText ()</p></li><li><p>运行代码，在微信开发者工具中单击前和单击后的页面效果如下图所示</p><p><img data-src="https://images.weserv.nl/?url=https://raw.githubusercontent.com/rainyblue1001/image/main/img/image-20240618235451427.png" alt="image-20240618235451427"></p></li></ol><h1 id="7条件渲染"><a class="anchor" href="#7条件渲染">#</a> 7. 条件渲染</h1><p>在微信小程序开发过程中，如果需要根据不同的判断结果显示不同的组件，可以使用条件渲染来实现。</p><p><span class="red">条件渲染通过标签的 wx:if 控制属性来完成。</span></p><p>使用 wx:if=“” 来判断是否需要渲染标签对应的组件，如果变量 val 的值为 true，则渲染组件并输出；变量 val 的值为 false，则不渲染组件</p><p>示例代码如下：</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>True<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>通过变量 condition 的值来控制是否渲染 view 组件</p><p>给标签设置了 wx:if 控制属性后，可以为后面的标签设置 wx:elif、wx:else 控制属性。</p><ul><li>wx:elif 控制属性表示当前面标签的 if 条件不满足时，继续判断 elif（else if）的条件；</li><li>wx:else 控制属性表示当前面的 if 条件不满足时，渲染 else 对应的组件。</li><li>wx:else 控制属性也可以直接出现在 wx:if 控制属性的后面</li></ul><p>示例代码如下：</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>elif</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>#8. &lt;block&gt; 标签</p><p>通过 &lt;block&gt; 标签可以创建一个容器，该标签并不是一个组件，它仅仅是一个包装元素，不会在页面中做任何渲染，只接收控制属性。</p><p>&lt;block&gt; 标签的示例代码如下</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>view1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>view2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>&lt;block&gt; 标签中 wx:if 控制属性的值为 true，在页面上会渲染出 &lt; block &gt; 组件内部的两个 view 组件</p><h1 id="9hidden属性"><a class="anchor" href="#9hidden属性">#</a> 9.hidden 属性</h1><p>除 wx:if 控制属性外，hidden 属性也可以控制组件的显示与隐藏，条件为 true 时隐藏组件</p><p>里面的内容，条件为 false 时显示组件里面的内容，示例代码如下</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hidden为true时不显示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>hidden 与 wx:if 的区别：</p><ul><li>wx:if 控制属性的初始渲染条件为 false，只有条件第一次变为 true 的时候才开始渲染，hidden 属性所在的组件始终会被渲染，只是简单的控制显示与隐藏。</li><li>wx:if 控制属性有更大的切换开销而 hidden 属性有更高的初次渲染开销。</li><li>在需要频繁切换显示和隐藏的情境下用 hidden 更好，而如果运行时条件不太可能会改变则用 wx:if 控制属性更好</li></ul><h1 id="10data-自定义属性"><a class="anchor" href="#10data-自定义属性">#</a> 10.data-* 自定义属性</h1><p>微信小程序可以通过自定义属性来进行传参。</p><p>微信小程序中的 data-* 是一个自定义属性，data-* 自定义属性实际上是由 data - 前缀加上一个自定义的属性名组成的，属性名中如果有多个单词，用连字符 “-” 连接。</p><p>data-* 自定义属性的属性值表示要传参的数据。</p><p>在事件处理函数中通过 target 或 currentTarget 对象的 dataset 属性可以获取数据。</p><p>dataset 属性是一个对象，该对象的属性与 data-* 自定义属性相对应。</p><p>通过设置 data-* 自定义属性实现参数的传递：</p><ol><li><p>在 pages/index/index.wxml 文件中编写页面结构。</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>demo<span class="token punctuation">"</span></span> <span class="token attr-name">data-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>xiaochengxu<span class="token punctuation">"</span></span> <span class="token attr-name">data-age</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  获取姓名和年龄</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>姓名：<span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>年龄：<span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li><li><p>在 pages/index/index.js 文件中编写页面逻辑。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'初始名字'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token function-variable function">demo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token literal-property property">name</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>name<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token literal-property property">age</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>age</pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>在微信开发者工具中，单击 “获取姓名和年龄” 前后的对比如下图所示</p><p><img data-src="https://images.weserv.nl/?url=https://raw.githubusercontent.com/rainyblue1001/image/main/img/image-20240608182842473.png" alt="image-20240608182842473"></p></li></ol><h1 id="11模块"><a class="anchor" href="#11模块">#</a> 11. 模块</h1><p>在微信小程序中，为了提高代码的可复用性，通常会将一些公共的代码抽离成单独的 JS 文件，作为模块使用，每个 JS 文件均为一个模块</p><p>微信小程序提供了模块化开发的语法，可以使用 module.exports 语法对外暴露接口，然后在需要使用模块的地方通过 require () 函数引入模块</p><p>创建和引入模块案例：</p><ol><li><p>创建模块。在项目的根目录下创建一个 utils 目录，用于保存项目中的模块，然后在该目录下创建 welcome.js 文件。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'welcome'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>使用 module.exports 语法暴露了一个对象，作为模块使用</p></li><li><p>引入模块。在页面的 JS 文件中使用 require () 函数将模块引入。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">var</span> welcome <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../../utils/welcome.js'</span><span class="token punctuation">)</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>welcome<span class="token punctuation">.</span>message<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>require () 函数的参数是模块的路径，并且需要使用相对路径，不能使用绝对路径，否则会报错。模块路径中，文件扩展名 “.js” 可以省略</p></li></ol><h1 id="12列表渲染"><a class="anchor" href="#12列表渲染">#</a> 12. 列表渲染</h1><p>列表渲染通过 wx:for 控制属性来实现。</p><p>微信小程序进行列表渲染时，会根据列表中数据的数量渲染相应数量的内容。</p><p><span class="red">在 wx:for 控制属性所在标签的内部，可以使用 item 变量获取当前项的值，使用 index 变量获取当前项的数组索引或对象属性名。</span></p><p>如果不想使用 item 和 index 这两个变量名，还可以通过 wx:for-item 控制属性更改 item 的变量名；通过 wx:for-index 控制属性更改 index 的变量名。</p><p>wx:key 控制属性</p><ul><li>wx:for 控制属性通常搭配 wx:key 控制属性使用。</li><li>wx:key 控制属性用于为每一项设置唯一标识，这样可以在数据改变后页面重新渲染时，使原有组件保持自身的状态，而不是重新创建，这样可以提高列表渲染的效率。</li></ul><p>设置 wx:key</p><ol><li>如果 item 本身就是一个具有唯一性的字符串或数字，则可以将 wx:key 的值设置为 * this，*this 表示 item 本身。</li><li>如果给定的数据是一个由对象作为数组元素构成的数组，那么可以将 wx:key 的值设置为对象中的一个 “值具有唯一性” 的属性的名称。</li></ol><p><strong>数组的列表渲染案例：</strong></p><ol><li><p>在 pages/index/index.js 文件的 Page ({}) 中编写页面数据。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li><li><p>在 pages/index/index.wxml 文件中编写页面结构，通过列表渲染的方式将 arr 数组渲染到页面中。</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>*this<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment"></span> <span class="token comment"></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li></ol><p>数组中包含对象情况下的列表渲染案例：</p><ol><li><p>在 pages/index/index.js 文件的 Page ({}) 中编写页面数据。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token punctuation">&#123;</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'梅'</span> <span class="token punctuation">,</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'兰'</span> <span class="token punctuation">,</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#123;</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'竹'</span> <span class="token punctuation">,</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'菊'</span> <span class="token punctuation">,</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>id 是每条数据的唯一标识</p></li><li><p>在 pages/index/index.wxml 文件中编写页面结构，将 list 数组中的数据在页面中显示出来。</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment"></span>-----<span class="token comment"></span>=======<span class="token comment"></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>数组中包含对象情况下的列表渲染的页面效果如下图所示：</p><p><img data-src="https://images.weserv.nl/?url=https://raw.githubusercontent.com/rainyblue1001/image/main/img/image-20240608183458412.png" alt="image-20240608183458412"></p></li><li><p>在 pages/index/index.wxml 文件中修改页面结构，实现通过 wx:for-item、wx:for-index 更改 item 和 index 的变量名。</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item2<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index2<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment"></span>：<span class="token comment"></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">&lt;!-- 通过 wx:for-item 更改 item 的变量名为 item2，通过 wx:for-index 更改 index 的变量名为 index2 --></span></pre></td></tr></table></figure><p>更名后列表渲染的页面效果如下图所示：</p><p><img data-src="https://images.weserv.nl/?url=https://raw.githubusercontent.com/rainyblue1001/image/main/img/image-20240608183658029.png" alt="image-20240608183658029"></p></li></ol><h1 id="13网络请求"><a class="anchor" href="#13网络请求">#</a> 13. 网络请求</h1><p>客户端与服务器进行交互时，客户端请求服务器的过程称为网络请求。</p><p>例如，获取用户的头像信息，需要客户端向服务器发送请求，服务器查询到数据后把数据传递给客户端。</p><p>在微信小程序中实现网络请求时，需要服务器给微信小程序提供服务器接口。</p><p><span class="red">在微信小程序中发起网络请求可以通过调用 wx.request () 方法来实现。</span></p><p>wx.request () 方法的常见选项</p><table><thead><tr><th><strong>选项</strong></th><th><strong>类型</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>url</td><td>string</td><td>开发者服务器接口地址，默认值为 &quot;&quot;</td></tr><tr><td>data</td><td>string/object/ArrayBuffer</td><td>请求的参数，默认值为 &quot;&quot;</td></tr><tr><td>header</td><td>object</td><td>设置请求的 header, 默认值为 &quot;&quot;</td></tr><tr><td>method</td><td>string</td><td>HTTP 请求方式，默认值为 GET</td></tr><tr><td>dataType</td><td>string</td><td>返回的数据格式，默认值为 json</td></tr><tr><td>responseType</td><td>string</td><td>响应的数据类型，默认值为 text</td></tr><tr><td>success</td><td>function</td><td>接口调用成功的回调函数</td></tr><tr><td>fail</td><td>function</td><td>接口调用失败的回调函数</td></tr><tr><td>complete</td><td>function</td><td>接口调用结束的回调函数</td></tr></tbody></table><blockquote><p>注意：method 选项的合法值包括 OPTIONS、GET、HEAD、POST、PUT、DELETE、TRACE 和 CONNECT，具体使用哪个，以服务器接口的要求为准。</p></blockquote><p>每个 wx:request () 方法都是一个请求任务，可以通过 abort () 方法将其取消。</p><p>示例代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 发起网络请求</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> requestTask <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'URL地址'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">//wx.request () 的常见参数……</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 取消请求任务</span></pre></td></tr><tr><td data-num="7"></td><td><pre>requestTask<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 调用 wx.request () 方法发起网络请求</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 调用 abort () 方法取消请求任务</span></pre></td></tr></table></figure><p>通过 wx.request () 方法发起一个 GET 方式的请求</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'URL地址'</span><span class="token punctuation">,</span>   <span class="token comment">// 表示服务器接口地址</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>     <span class="token comment">// 表示 HTTP 请求方式为 GET</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zs'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>   <span class="token comment">// 设置了请求参数 name</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>       <span class="token comment">// 定义了接口调用成功的回调函数 success </span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="14提示框"><a class="anchor" href="#14提示框">#</a> 14. 提示框</h1><p>在微信小程序中，如果想实现点击一个按钮弹出</p><p>一个提示框的效果，可以使用以下 2 种方式。</p><p>① wx.showLoading () 方法</p><p>wx.showLoading () 方法用于弹出加载提示框，加载提示框弹出后，不会自动关闭，需要手动调用 wx.hideLoading () 方法才能关闭提示框。</p><p>wx.showLoading () 方法的常用选项如下表所示</p><table><thead><tr><th>选项</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>title</td><td>string</td><td>提示的内容</td></tr><tr><td>mask</td><td>boolean</td><td>是否显示透明蒙层，防止触摸穿透，默认值为 false</td></tr><tr><td>success</td><td>function</td><td>接口调用成功的回调函数</td></tr><tr><td>fail</td><td>function</td><td>接口调用失败的回调函数</td></tr><tr><td>complete</td><td>function</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table><p>wx.showLoading () 方法的使用案例</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 用于弹出加载提示框，提示内容为 “加载中”</span></pre></td></tr><tr><td data-num="2"></td><td><pre>wx<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'加载中'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 用于在 2 秒后关闭加载提示框</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>    wx<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>② wx.showToast () 方法</p><p>提示框 wx.showToast () 方法用于显示消息提示框，该方法的常用选项如下表所示</p><table><thead><tr><th>选项</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>title</td><td>string</td><td>提示的内容</td></tr><tr><td>icon</td><td>string</td><td>图标，默认值为 success</td></tr><tr><td>duration</td><td>number</td><td>提示的停留时间，单位为毫秒，默认值为 1500</td></tr><tr><td>mask</td><td>boolean</td><td>是否显示透明蒙层，防止触摸穿透，默认值为 false</td></tr><tr><td>fail</td><td>function</td><td>接口调用失败的回调函数</td></tr><tr><td>complete</td><td>function</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table><p>wx.showToast () 方法的使用案例：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'成功'</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">2000</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 设置了消息提示框的内容为 “成功”，图标为 success，提示的停留时间为 2 秒</span></pre></td></tr></table></figure><h1 id="15wxs"><a class="anchor" href="#15wxs">#</a> 15.WXS</h1><p>WXS（WeiXin Script）是微信小程序独有的一套脚本语言，可以结合 WXML 构建出页面结构。 WXS 的典型应用场景是 “过滤器”，所谓的过滤器是指在渲染数据之前，对数据进行处理，过滤器处理的结果最终会显示在页面上。</p><p>WXS 的特点:</p><ol><li>WXS 与 JavaScript 不同；</li><li>WXS 不能作为组件的事件回调；</li><li>具有隔离性；</li><li>在 iOS 设备上效率高。</li></ol><p>为了降低 WXS 的学习成本，WXS 在设计时借鉴了 JavaScript 的语法，但是本质上，WXS 和 JavaScript 本质上是完全不同的两种语言，在使用 WXS 时应该注意以下 3 点。</p><ol><li>WXS 有 8 种数据类型，包括 number（数值）、string（字符串）、boolean（布尔）、object（对象）、function（函数）、array（数组）、date（日期）、regexp（正则）。</li><li>WXS 不支持 let、const、解构赋值、展开运算符、箭头函数、对象属性简写等语法，WXS 支持 var 定义变量、普通 function 函数等语法。</li><li>WXS 遵循 CommonJS 规范。在每个模块内部，module 变量代表当前模块，这个变量是一个对象，它的 exports 属性（即 module.exports）是对外的接口，在使用 require () 函数引用其他模块时，得到的是被引用模块中 module.exports 所指的对象。</li></ol><p>WXS 不能作为组件的事件回调 :</p><ul><li>WXS 经常与 Mustache 语法配合使用，但是在 WXS 中定义的函数不能作为组件的事件回调函数。</li></ul><p>具有隔离性</p><p>隔离性是指 WXS 代码的运行环境和其他 JavaScript 代码是隔离的，体现在以下两方面。</p><ol><li>在 WXS 代码中不能调用页面的 JS 文件中定义的函数。</li><li>在 WXS 代码中不能调用微信小程序提供的 API。</li></ol><p>在 iOS 设备上效率高</p><ul><li>在 iOS 设备上，微信小程序内 WXS 代码的执行速度比 JavaScript 代码快 2~20 倍；在 Android 设备上，两者的运行效率无差异。</li></ul><h1 id="16上拉触底"><a class="anchor" href="#16上拉触底">#</a> 16 上拉触底</h1><p>在原生应用或者网页的交互中，经常会有上拉加载这个功能。用户在浏览列表页面时，手指在手机屏幕上进行上拉滑动操作，通过上拉加载请求数据，增加列表数据。</p><p>微信小程序提供了 onReachBottom () 事件处理函数，即页面上拉触底事件处理函数，用于监听当前页面的上拉触底事件。</p><p>onReachBottom () 事件处理函数的示例代码如下：</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre>onReachBottom<span class="token operator">:</span> function () <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    console.log('触发了上拉触底的事件')</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><p>在默认情况下，触发上拉触底事件时，滚动条距离页面底部的距离为 50px，即上拉触底距离为 50px。在实际开发中，开发人员可以根据实际需求，在全局或页面的 JSON 配置文件中通过 onReachBottomDistance 属性修改上拉触底的距离。</p><p>在页面的 JSON 文件中配置上拉触底的距离为 200px：</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span>  </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token property">"onReachBottomDistance"</span><span class="token operator">:</span> <span class="token number">200</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="17下拉刷新"><a class="anchor" href="#17下拉刷新">#</a> 17 下拉刷新</h1><p>在原生应用的交互中，经常会有下拉刷新操作，即当用户下拉页面到达顶部时，再进行下拉可以将数据重新加载。</p><p>启用下拉刷新的方式:</p><ol><li>全局开启下拉刷新<ul><li>在 app.json 文件的 window 节点中，将 enablePullDownRefresh 设置为 true。</li></ul></li><li>局部开启下拉刷新<ul><li>在页面的 JSON 文件中，将 enablePullDownRefresh 设置为 true。</li></ul></li></ol><p>开启下拉刷新后，当下拉操作执行时，就会触发 onPullDownRefresh () 事件处理函数。</p><p>onPullDownRefresh () 事件处理函数的示例代码如下。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function-variable function">onPullDownRefresh</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'触发了下拉刷新的事件'</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>执行下拉刷新操作后，页面顶部会出现加载提示，并且页面需要延迟一段时间才会弹回去。</p><p>为了优化用户体验，可以在完成下拉刷新的数据加载后，立即调用 wx.stopPullDownRefresh () 方法停止使用当前页面的下拉刷新加载效果</p><p>示例代码如下：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>wx<span class="token punctuation">.</span><span class="token function">stopPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><div class="tags"><a href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag"><i class="ic i-tag"></i> 微信小程序</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2024-06-19 00:24:31" itemprop="dateModified" datetime="2024-06-19T00:24:31+08:00">2024-06-19</time> </span><span id="2024/06/04/Educational/WeChat/WeChat_Program3/" class="item leancloud_visitors" data-flag-title="第三章：微信小程序页面交互" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="萝卜仔 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="萝卜仔 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>萝卜仔 <i class="ic i-at"><em>@</em></i>Radish'blog</li><li class="link"><strong>本文链接：</strong> <a href="http://rainyblue.cn/2024/06/04/Educational/WeChat/WeChat_Program3/" title="第三章：微信小程序页面交互">http://rainyblue.cn/2024/06/04/Educational/WeChat/WeChat_Program3/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2024/06/03/Educational/WeChat/WeChat_Program2/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;images.weserv.nl&#x2F;?url&#x3D;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;rainyblue1001&#x2F;image&#x2F;main&#x2F;img&#x2F;img2024237.jpg" title="第二章：微信小程序页面制作"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 微信小程序开发</span><h3>第二章：微信小程序页面制作</h3></a></div><div class="item right"><a href="/2024/06/05/Educational/Software/2023-Software-project-review/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;images.weserv.nl&#x2F;?url&#x3D;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;rainyblue1001&#x2F;image&#x2F;main&#x2F;img&#x2F;img2024002.jpg" title="2023年软件项目管理复习提纲"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 软件项目管理</span><h3>2023年软件项目管理复习提纲</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1page%E5%87%BD%E6%95%B0"><span class="toc-number">1.</span> <span class="toc-text">1.Page () 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%88%9D%E5%A7%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">1.1.</span> <span class="toc-text">页面初始数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.</span> <span class="toc-text">页面生命周期回调函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.</span> <span class="toc-text">页面事件处理函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">2.</span> <span class="toc-text">2. 数据绑定</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-number">3.</span> <span class="toc-text">3. 事件绑定</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.</span> <span class="toc-text">4. 事件对象</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5this%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">5.</span> <span class="toc-text">5.this 关键字</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6setdata%E6%96%B9%E6%B3%95"><span class="toc-number">6.</span> <span class="toc-text">6.setData () 方法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">7.</span> <span class="toc-text">7. 条件渲染</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9hidden%E5%B1%9E%E6%80%A7"><span class="toc-number">8.</span> <span class="toc-text">9.hidden 属性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10data-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7"><span class="toc-number">9.</span> <span class="toc-text">10.data-* 自定义属性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11%E6%A8%A1%E5%9D%97"><span class="toc-number">10.</span> <span class="toc-text">11. 模块</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">11.</span> <span class="toc-text">12. 列表渲染</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#13%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82"><span class="toc-number">12.</span> <span class="toc-text">13. 网络请求</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#14%E6%8F%90%E7%A4%BA%E6%A1%86"><span class="toc-number">13.</span> <span class="toc-text">14. 提示框</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#15wxs"><span class="toc-number">14.</span> <span class="toc-text">15.WXS</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#16%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95"><span class="toc-number">15.</span> <span class="toc-text">16 上拉触底</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#17%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0"><span class="toc-number">16.</span> <span class="toc-text">17 下拉刷新</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2024/06/02/Educational/WeChat/WeChat_Program1/" rel="bookmark" title="第一章：小程序入门">第一章：小程序入门</a></li><li><a href="/2024/06/03/Educational/WeChat/WeChat_Program2/" rel="bookmark" title="第二章：微信小程序页面制作">第二章：微信小程序页面制作</a></li><li class="active"><a href="/2024/06/04/Educational/WeChat/WeChat_Program3/" rel="bookmark" title="第三章：微信小程序页面交互">第三章：微信小程序页面交互</a></li><li><a href="/2024/06/08/Educational/WeChat/WX_review/" rel="bookmark" title="微信小程序内容复习">微信小程序内容复习</a></li><li><a href="/2024/06/17/Educational/WeChat/WX_Exercises/" rel="bookmark" title="微信小程序试题复习">微信小程序试题复习</a></li><li><a href="/2024/06/19/Educational/WeChat/WeChat_Program4/" rel="bookmark" title="第四章：微信小程序常用API（上）">第四章：微信小程序常用API（上）</a></li><li><a href="/2024/06/19/Educational/WeChat/WeChat_Program5/" rel="bookmark" title="第五章：微信小程序常用API（下）">第五章：微信小程序常用API（下）</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="萝卜仔" data-src="/images/avatar.png"><p class="name" itemprop="name">萝卜仔</p><div class="description" itemprop="description">Only studying is exalted.</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">27</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">13</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">7</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3JhaW55Ymx1ZTEwMDE=" title="https:&#x2F;&#x2F;github.com&#x2F;rainyblue1001"><i class="ic i-github"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS84MC04Mi0zNC0zNg==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;80-82-34-36"><i class="ic i-zhihu"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS9SYWRpc2g=" title="https:&#x2F;&#x2F;about.me&#x2F;Radish"><i class="ic i-address-card"></i></span> <span class="exturl item email" data-url="bWFpbHRvOnJhaW55Ymx1ZV8xMDAxQGZveG1haWwuY29t" title="mailto:rainyblue_1001@foxmail.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/collection/" rel="section"><i class="ic i-heart"></i>收藏</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2024/06/03/Educational/WeChat/WeChat_Program2/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2024/06/05/Educational/Software/2023-Software-project-review/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/Work/" title="分类于 工作类">工作类</a></div><span><a href="/2024/05/25/Work/%E5%B7%A5%E4%BD%9C/" title="工作记录">工作记录</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Educational/" title="分类于 学习类">学习类</a> <i class="ic i-angle-right"></i> <a href="/categories/Educational/python/" title="分类于 Python语言">Python语言</a> <i class="ic i-angle-right"></i> <a href="/categories/Educational/python/Data-analysis/" title="分类于 数据分析">数据分析</a></div><span><a href="/2024/06/20/Educational/python/Data-analysis/Data_analysis_review4/" title="数据分析复习（第四章）">数据分析复习（第四章）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Educational/" title="分类于 学习类">学习类</a> <i class="ic i-angle-right"></i> <a href="/categories/Educational/python/" title="分类于 Python语言">Python语言</a> <i class="ic i-angle-right"></i> <a href="/categories/Educational/python/Data-analysis/" title="分类于 数据分析">数据分析</a></div><span><a href="/2024/06/18/Educational/python/Data-analysis/Data_analysis_review3/" title="数据分析复习（第三章）">数据分析复习（第三章）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Educational/" title="分类于 学习类">学习类</a> <i class="ic i-angle-right"></i> <a href="/categories/Educational/python/" title="分类于 Python语言">Python语言</a> <i class="ic i-angle-right"></i> <a href="/categories/Educational/python/Data-analysis/" title="分类于 数据分析">数据分析</a></div><span><a href="/2024/06/16/Educational/python/Data-analysis/Anaconda/" title="Anaconda的安装">Anaconda的安装</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Daily-Life/" title="分类于 日常类">日常类</a> <i class="ic i-angle-right"></i> <a href="/categories/Daily-Life/photos/" title="分类于 照片收藏">照片收藏</a></div><span><a href="/2020/08/13/Daily-Life/photos/images/" title="照片">照片</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Educational/" title="分类于 学习类">学习类</a> <i class="ic i-angle-right"></i> <a href="/categories/Educational/Software/" title="分类于 软件项目管理">软件项目管理</a></div><span><a href="/2024/06/05/Educational/Software/2023-Software-project-review/" title="2023年软件项目管理复习提纲">2023年软件项目管理复习提纲</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Educational/" title="分类于 学习类">学习类</a> <i class="ic i-angle-right"></i> <a href="/categories/Educational/shoka-theme/" title="分类于 Shoka教程">Shoka教程</a></div><span><a href="/2024/05/05/Educational/theme-shoka/theme-shoka-doc/config/" title="Step.2 基本配置">Step.2 基本配置</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Interests/" title="分类于 兴趣类">兴趣类</a></div><span><a href="/2024/05/25/Interests/%E5%85%B4%E8%B6%A3%E7%88%B1%E5%A5%BD/" title="兴趣爱好">兴趣爱好</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Educational/" title="分类于 学习类">学习类</a> <i class="ic i-angle-right"></i> <a href="/categories/Educational/python/" title="分类于 Python语言">Python语言</a> <i class="ic i-angle-right"></i> <a href="/categories/Educational/python/Data-analysis/" title="分类于 数据分析">数据分析</a></div><span><a href="/2024/06/18/Educational/python/Data-analysis/Data_analysis_review2/" title="数据分析复习（第二章）">数据分析复习（第二章）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Educational/" title="分类于 学习类">学习类</a> <i class="ic i-angle-right"></i> <a href="/categories/Educational/python/" title="分类于 Python语言">Python语言</a> <i class="ic i-angle-right"></i> <a href="/categories/Educational/python/Web-crawlers/" title="分类于 网络爬虫">网络爬虫</a></div><span><a href="/2024/05/27/Educational/python/Web-crawlers/%E6%95%B0%E6%8D%AE%E7%88%AC%E8%99%AB/" title="爬取彼岸图网的壁纸">爬取彼岸图网的壁纸</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">萝卜仔 @ ShokaBlog</span></div><div class="timing"><span id="RunTime"></span><script>var BootDate = new Date("2021/10/24 23:00:00"); &#123;# 站点起始时间 #&#125;
    function ShowRunTime(id) {
      var NowDate = new Date();
      var RunDateM = parseInt(NowDate - BootDate);
      var RunDays = Math.floor(RunDateM/(24*3600*1000));
      var RunHours = Math.floor(RunDateM%(24*3600*1000)/(3600*1000));
      var RunMinutes = Math.floor(RunDateM%(24*3600*1000)%(3600*1000)/(60*1000));
      var RunSeconds = Math.round(RunDateM%(24*3600*1000)%(3600*1000)%(60*1000)/1000);
      var RunTime = RunDays + " &#123;&#123; __('footer.days') &#125;&#125; " + RunHours + " &#123;&#123; __('footer.hours') &#125;&#125; " + RunMinutes + " &#123;&#123; __('footer.minutes') &#125;&#125; " + RunSeconds + " &#123;&#123; __('footer.seconds') &#125;&#125;";
      document.getElementById(id).innerHTML = "&#123;&#123; __('footer.timing') &#125;&#125; " + RunTime;
    }
    setInterval("ShowRunTime('RunTime')", 1000);</script></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">271k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">11:17</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2024/06/04/Educational/WeChat/WeChat_Program3/",favicon:{show:"恭喜！发现宝藏啦",hide:"哎呀！离开页面了"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></div><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>